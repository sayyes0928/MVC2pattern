const newLocal = (window.performance && 2 === window.performance.navigation.type && window.location.reload(),
    $(function () {
        function e() { g.style.display = "none"; }
        function o() { var e = 300, o = 460, t = 2; g.style.width = e + "px", g.style.height = o + "px", g.style.border = t + "px solid", g.style.left = ((window.innerWidth || document.documentElement.clientWidth) - e) / 2 - t + "px", g.style.top = "150px"; }
        function t(o) { 0 < o && (k.resetSelectedCoupon(), $("#order_coupon_cost").val(0), showFlashMessage({ alert: "\ucfe0\ud3f0\uc744 \ub2e4\uc2dc \uc120\ud0dd\ud574\uc8fc\uc138\uc694." }), $(".code_coupon").find(".caption").text("").hide(), a(), $("#form-radio-nothing").prop("checked", !0), $(".form-radio-coupon").each(function () { var e = $(this).data("user_type"); 0 == e ? $(this).find("input[type=radio]").removeAttr("disabled", "disabled") : 1 == e ? 0 == o ? $(this).find("input[type=radio]").removeAttr("disabled", "disabled") : (alert("\uc778\uc99d \ud734\ub300\ud3f0 \ubc88\ud638\uc758 \uad6c\ub9e4\uc774\ub825\uc774 \uc788\uc5b4\n\uccab \uad6c\ub9e4 \ucfe0\ud3f0 \uc0ac\uc6a9\uc774 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4"), $(this).find("input[type=radio]").attr("disabled", "disabled")) : 2 == e ? 1 == o ? $(this).find("input[type=radio]").removeAttr("disabled", "disabled") : $(this).find("input[type=radio]").attr("disabled", "disabled") : $(this).find("input[type=radio]").removeAttr("disabled", "disabled"); })); } function s() { $(".form-radio-coupon").each(function () { var e = $(this).data("id"), o = k.getCoupon(e); $(this).data("user_type", o.user_type), $(this).find(".cost").text(numberWithCommas(o.benefit) + "\uc6d0"), $(this).find(".caption").text(o.getDescription()); var t = parseInt(Math.abs(new Date - new Date(o.used_end_at + "T23:59:59+09:00")) / 36e5), a = ""; a = 0 != parseInt(t / 24) ? parseInt(t / 24) + "\uc77c " + t % 24 + "\uc2dc\uac04 \ub0a8\uc74c" : t % 24 + "\uc2dc\uac04 \ub0a8\uc74c", $(this).find(".due").text(a); }); } function d() { $("#use_all_mileage").change(function () { $(this).is(":checked") ? (k.payment_cost + k.delivery_cost > x ? (k.mileage_cost = parseInt(x), $("#selected_mileages").val(x), $("#order_mileage_cost").val(x)) : (k.mileage_cost = parseInt(k.payment_cost + k.delivery_cost), $("#selected_mileages").val(k.payment_cost + k.delivery_cost), $("#order_mileage_cost").val(k.payment_cost + k.delivery_cost)), $("#selected_mileages").change()) : (k.mileage_cost = 0, $("#selected_mileages").val(0), $("#order_mileage_cost").val(0), a()); }), $("#selected_mileages").change(function () { var e = $(this).val(); 0 < e && 3e4 <= k.payment_cost ? (x < e && (alert("\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ud3ec\uc778\ud2b8 \ubcf4\ub2e4 \ub9ce\uc740 \uac00\uaca9\uc774 \uc785\ub825\ub418\uc5c8\uc2b5\ub2c8\ub2e4."), e = x), k.payment_cost + k.delivery_cost > e ? (k.mileage_cost = parseInt(e), $("#selected_mileages").val(e), $("#order_mileage_cost").val(e)) : (k.mileage_cost = parseInt(k.payment_cost + k.delivery_cost), $("#selected_mileages").val(k.payment_cost + k.delivery_cost), $("#order_mileage_cost").val(k.payment_cost + k.delivery_cost)), e != x && $("#use_all_mileage").prop("checked", !1), a(), alert("\ud3ec\uc778\ud2b8\ub97c " + numberWithCommas(k.mileage_cost) + "\uc6d0\uc744 \uc0ac\uc6a9\ud558\uace0 " + numberWithCommas(x - k.mileage_cost) + "\uc6d0 \ub0a8\uc558\uc2b5\ub2c8\ub2e4.")) : (0 < e ? alert("3\ub9cc\uc6d0\uc774\uc0c1(\ubc30\uc1a1\ube44\uc81c\uc678) \uad6c\ub9e4\uc2dc \ud3ec\uc778\ud2b8 \uc0ac\uc6a9\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.") : alert("0\ubcf4\ub2e4 \ud070 \uac12\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694"), e = 0, k.mileage_cost = parseInt(e), $("#selected_mileages").val(e), $("#order_mileage_cost").val(e), $("#use_all_mileage").prop("checked", !1), a()); }); } function c() { var e = $("#order_received_zip_code").val(); $.ajax({ url: "/orders/check_backwoods?postcode=" + e, success: function (e) { return j = e.jeju, M = e.backwoods, P = M || j, $(".delivery_fee_backwoods").hide(), j || "\uc81c\uc8fc\ud2b9\ubcc4\uc790\uce58\ub3c4" !== $("#order_received_at_sido").val() || (P = j = !0), k.can_not_jeju && j ? (alert("\uc81c\uc8fc\uc9c0\uc5ed\uc5d0 \ubc1c\uc1a1 \ubd88\uac00\ub2a5\ud55c \ubb3c\uac74\uc774 \uc788\uc2b5\ub2c8\ub2e4."), !1) : k.can_not_backwoods && M ? (alert("\ub3c4\uc11c\uc0b0\uac04 \uc9c0\uc5ed\uc5d0 \ubc1c\uc1a1 \ubd88\uac00\ub2a5\ud55c \ubb3c\uac74\uc774 \uc788\uc2b5\ub2c8\ub2e4."), !1) : (P && k.has_backwoods_fee && ($(".delivery_fee_backwoods").show(), alert("\uc81c\uc8fc/\ub3c4\uc11c\uc0b0\uac04 \uc9c0\uc5ed\uc740 \ubcc4\ub3c4\uc758 \ubc30\uc1a1\ube44\uac00 \ucd94\uac00\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4.")), $(".products_delivery_is_backwoods").val(P), void a()); }, error: function (e, o, t) { console.log("Status: " + o), console.log("Error: " + t); }, dataType: "json", cache: !1, async: !1 }); } function a() {
            var e = k.calcDeliveryFee(P); k.delivery_cost = e, k.real_pay_cost = e + k.payment_cost - k.mileage_cost - k.coupon_cost, k.real_pay_cost < 0 && (k.mileage_cost = parseInt(k.mileage_cost + k.real_pay_cost), k.real_pay_cost = e + k.payment_cost - k.mileage_cost - k.coupon_cost, $("#selected_mileages").val(k.mileage_cost), $("#order_mileage_cost").val(k.mileage_cost)); var o = k.real_pay_cost, t = k.payment_cost - k.mileage_cost - k.coupon_cost < 0 ? 0 : k.payment_cost - k.mileage_cost - k.coupon_cost, a = $("#expect_mileage").data("benefit"); if (1e6 <= t) {
                if (1 < a) { var i = "<del>" + numberWithCommas(Math.floor(.01 * t) + 2e4) + "P</del> " + numberWithCommas(Math.floor(.01 * t * a) + 2e4 + "P"); $("#expect_mileage").html(i), 3 != a && $("#vip-point-caption>.text").text("VIP \ub4f1\uae09\uc740 " + numberWithCommas(Math.floor(.01 * t * 3) + 2e4) + "P \uc801\ub9bd"); }
                else
                    $("#expect_mileage").text(numberWithCommas(Math.floor(.01 * t) + 2e4) + "P"), $("#vip-point-caption>.text").text("VIP \ub4f1\uae09\uc740 " + numberWithCommas(Math.floor(.01 * t * 3) + 2e4) + "P \uc801\ub9bd"); $("#bonus-point-caption>.text").text("100\ub9cc\uc6d0 \uc774\uc0c1 \uad6c\ub9e4\ud558\uc5ec 20,000P \ucd94\uac00 \uc801\ub9bd \ub428");
            }
            else if (1 < a) { i = "<del>" + numberWithCommas(Math.floor(.01 * t)) + "P</del> " + numberWithCommas(Math.floor(.01 * t * a)) + "P"; $("#expect_mileage").html(i), 3 != a && $("#vip-point-caption>.text").text("VIP \ub4f1\uae09\uc740 " + numberWithCommas(Math.floor(.01 * t * 3)) + "P \uc801\ub9bd"); }
            else
                $("#expect_mileage").text(numberWithCommas(Math.floor(.01 * t)) + "P"), $("#vip-point-caption>.text").text("VIP \ub4f1\uae09\uc740 " + numberWithCommas(Math.floor(.01 * t * 3)) + "P \uc801\ub9bd"); $("#preview_product_cost").text(numberWithCommas(k.payment_cost)), $("#preview_delivery_cost").text(numberWithCommas(k.delivery_cost)), parseInt(k.coupon_cost) <= 0 ? $("#preview_coupon_cost").text("0") : $("#preview_coupon_cost").text("- " + numberWithCommas(k.coupon_cost)), parseInt(k.mileage_cost) <= 0 ? $("#preview_mileage_cost").text("0") : $("#preview_mileage_cost").text("- " + numberWithCommas(k.mileage_cost)), $("#preview_selling_cost").text(numberWithCommas(o) + "\uc6d0");
        } function i(e) { return 3 < (e = e.replace(/\D/g, "").substr(0, 11)).length && (e = e.substr(0, 3) + "-" + e.substr(3)), 7 < e.length && (e = e.substr(0, 8) + "-" + e.substr(8)), e; } function n() { $("#order_payer_phone_number").val().replace(/\D/g, "") === W ? ($("#verified_phone_number").find(".need_verified").hide(), T = !0) : ($("#verified_phone_number").find(".need_verified").show(), $("#do_verified_phone_number").show(), $("#verified_inputs").hide(), T = !1); }
        function r() { W = "", T = !1; var e = $("#order_payer_phone_number").val(), o = e.split("-"); "" !== e && 3 === o.length ? $.ajax({ url: "/verification/phone/request_pin", data: { phone1: o[0], phone2: o[1], phone3: o[2] }, context: document.body, type: "POST", dataType: "json", success: function (e) { e.success ? (showFlashMessage({ notice: o[0] + "-" + o[1] + "-" + o[2] + "\ubc88\ud638\ub85c \uc778\uc99d\ubc88\ud638\ub97c \uc804\uc1a1\ud558\uc600\uc2b5\ub2c8\ub2e4." }), $("#verified_inputs").show(), $("#do_verified_phone_number").hide()) : showFlashMessage({ alert: "\uc815\ud655\ud55c \ud578\ub4dc\ud3f0 \ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694." }); }, error: function () { showFlashMessage({ alert: "\uc77c\uc2dc\uc801\uc778 \ub124\ud2b8\uc6cc\ud06c \uc624\ub958\uac00 \ubc1c\uc0dd\ud558\uc5ec \uc778\uc99d\uc5d0 \uc2e4\ud328\ud55c \uacbd\uc6b0, \uc7a0\uc2dc \ud6c4, \uc7ac\uc804\uc1a1 \ubc84\ud2bc\uc744 \ud074\ub9ad\ud574 \uc8fc\uc138\uc694." }), $("#verified_inputs").show(), $("#do_verified_phone_number").hide(); }, cache: !1, async: !1 }) : showFlashMessage({ alert: "\uc815\ud655\ud55c \ud578\ub4dc\ud3f0 \ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694." }); }
        function _(e) { var o = $(e).find("> .event").data("title"), t = $(e).find("> .event").data("detail1"), a = $(e).find("> .event").data("detail2"); "" != o ? ($("#event_information").find(".title").text(o), "" != t ? ($("#event_information").find(".line1").show().text(t), "" != a ? $("#event_information").find(".line2").show().text(a) : $("#event_information").find(".line2").hide().text("")) : ($("#event_information").find(".line1").hide().text(""), $("#event_information").find(".line2").hide().text("")), $("#event_information").show()) : ($("#event_information").find(".title").text(""), $("#event_information").find(".line1").text(""), $("#event_information").find(".line2").text(""), $("#event_information").hide()), "simple_payment" == $('input[name="order[payment_method]"]:checked').val() ? $("#event_information").addClass("yellow") : $("#event_information").removeClass("yellow"); }
        function l() { var e = $('input[name="order[payment_method]"]:checked').val(); $("#pg_policy").find(".content").hide(), "credit_card" == e || "without_bankbook" == e ? $("#pg_policy").find(".nice").show() : "phone" == e ? $("#pg_policy").find(".phone").show() : "naverpay" == e ? $("#pg_policy").find(".naverpay").show() : "kakaopay" == e ? $("#pg_policy").find(".kakaopay").show() : "smilepay" == e ? $("#pg_policy").find(".smilepay").show() : "payco" == e ? $("#pg_policy").find(".payco").show() : "chai" == e ? $("#pg_policy").find(".chai").show() : "tosspay" == e ? $("#pg_policy").find(".toss").show() : "kcp_credit_card" == e && $("#pg_policy").find(".kcp").show(); }
        function p() {
            if (u()) {
                gtmHelper(3, $('input[name="order[payment_method]"]:checked').val()); var t = window.IMP; t.init("imp64774447"); var a = $('input[name="order[payment_method]"]:checked').val(), i = "", n = new Date; n.setDate(n.getDate() + 5); var r = !1; "credit_card" == a ? (a = "card", i = "nice") : "without_bankbook" == a ? (a = "vbank", i = "nice", $("#escrow_check").is(":checked") && (r = !0)) : "phone" == a ? (a = "phone", i = "mobilians") : "naverpay" == a ? i = a = "naverpay" : "smilepay" == a ? i = a = "smilepay" : "kakaopay" == a ? i = a = "kakaopay" : "payco" == a ? i = a = "payco" : "chai" == a ? (a = "trans", i = "chai") : "tosspay" == a ? i = a = "tosspay" : "kcp_credit_card" == a && (a = "card", i = "kcp"); for (var e = $("#write_message_per_product").is(":checked"), o = $("#delivery_message").val(), s = 0; s < k.productions.length; s++) { var d = $("#delivery_messages").find(".delivery_message").eq(s); null != d && (e || d.find(".delivery_each_memo").val(o)); } if ($("#order_real_pay_cost").val(k.real_pay_cost), $("#order_delivery_cost").val(k.delivery_cost), $("#coupon_id").val(k.selected_coupon_id), b.attr("data-remote", !0), b.submit(), 0 == k.real_pay_cost)
                    sleep(1e3,
                        function () { b.removeAttr("data-remote"), b.removeData("remote"), b.submit(); });
                else {
                    var c = $("tr.production").first().find(".information .name").text(); 25 <= c.length && "phone" === a ? c = c.substring(0, 20) + "..." : 40 <= c.length && (c = c.substring(0, 35) + "..."); var _ = []; $("tr.production").each(
                        function () { var e = $(this).data("name"); 25 <= e.length && "phone" === a ? e = e.substring(0, 20) + "..." : 40 <= e.length && (e = e.substring(0, 35) + "..."); var o = { categoryType: "PRODUCT", categoryId: "GENERAL", uid: $(this).data("id"), count: $(this).data("count"), name: e }; _.push(o); }); var l = null; "naverpay" !== a && (l = $("#order_payer_name").val()), $.ajax({
                            url: "/orders/" + $("#pre_order").data("id") + "/check_stock", success: function (e) {
                                if (!0 === e.success)
                                    if ("tosspay" == i)
                                        $.ajax({ url: "/payments/toss/" + $("#pre_order").data("id") + "/ready.json", type: "POST", data: { amount: k.real_pay_cost }, dataType: "json", async: !1, success: function (e) { e.success ? window.location.href = e.checkout_page : alert("Toss \uacb0\uc81c \uc694\uccad\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4. \ub2e4\ub978 \uacb0\uc81c\uc218\ub2e8\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."); }, error: function () { alert("Toss \uacb0\uc81c \uc694\uccad\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4. \ub2e4\ub978 \uacb0\uc81c\uc218\ub2e8\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."); } });
                                    else {
                                        var o = { pg: i, pay_method: a, merchant_uid: w, name: c, buyer_email: $("#order_payer_email").val(), amount: k.real_pay_cost, buyer_name: l, escrow: r || !1, buyer_tel: $("#order_payer_phone_number").val(), vbank_due: getYYYYMMDD(n), naverPopupMode: !0, naverProducts: _, m_redirect_url: window.location.protocol + "//" + window.location.host + "/orders/" + $("#pre_order").data("id") + "/payment_result" }; "chai" == i && (S && (o.metadata = { pid: "exhibition_" + F }), o.m_redirect_url = window.location.protocol + "//" + window.location.host + "/orders/" + $("#pre_order").data("id") + "/mobile_payment_result"), t.request_pay(o,
                                            function (e) {
                                                if (e.success) { var o = "\uacb0\uc81c\uac00 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."; o += "\uace0\uc720ID : " + e.imp_uid, o += "\uc0c1\uc810 \uac70\ub798ID : " + e.merchant_uid, o += "\uacb0\uc81c \uae08\uc561 : " + e.paid_amount, o += "\uce74\ub4dc \uc2b9\uc778\ubc88\ud638 : " + e.apply_num, "vbank" == e.pay_method ? ($("#order_apply_number").remove(), $("#order_imp_uid").val(e.imp_uid), $("#order_vbank_num").val(e.vbank_num), $("#order_vbank_name").val(e.vbank_name), $("#order_vbank_holder").val(e.vbank_holder), $("#order_vbank_date").val(e.vbank_date)) : ($("#order_imp_uid").val(e.imp_uid), $("#order_receipt_url").val(e.receipt_url), $("#order_apply_number").val(e.apply_num), $("#order_vbank_num").remove(), $("#order_vbank_name").remove(), $("#order_vbank_holder").remove(), $("#order_vbank_date").remove()), b.removeAttr("data-remote"), b.removeData("remote"), b.submit(); }
                                                else { $.ajax({ url: "/orders/" + $("#pre_order").data("id") + "/failed_order", success: function () { }, dataType: "json", async: !1 }); o = "\uacb0\uc81c\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4."; o += "\uc5d0\ub7ec\ub0b4\uc6a9 : " + e.error_msg, alert(o); }
                                            });
                                    }
                                else
                                    !0 === e.stock ? showFlashMessage({ alert: "\ud488\uc808\ub41c \uc0c1\ud488\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4. \uc0c1\ud488\uc744 \ub2e4\uc2dc \uc120\ud0dd\ud574\uc8fc\uc138\uc694." }) : showFlashMessage({ alert: "1\uc778\ub2f9 \ucd5c\ub300 \uad6c\ub9e4\uc218\ub7c9\uc744 \ucd08\uacfc\ud55c \uc0c1\ud488\uc774 \uc788\uc2b5\ub2c8\ub2e4." });
                            }, dataType: "json", async: !1
                        });
                }
            }
        } function u() {
            var e = !0; if ($("input[presence=true]").each(function () { "" == $(this).val() ? (e = !1, $(this).addClass("error")) : $(this).removeClass("error"); }), !e)
                return alert("\ud544\uc218 \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."), $([document.documentElement, document.body]).animate({ scrollTop: 0 }, 300), !1; if (!T)
                return alert("\uc8fc\ubb38\uc790 \ud578\ub4dc\ud3f0 \uc778\uc99d\uc744 \ud574\uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."), !1; if (k.can_not_jeju && j)
                alert("\uc81c\uc8fc\uc9c0\uc5ed\uc5d0 \ubc1c\uc1a1 \ubd88\uac00\ub2a5\ud55c \ubb3c\uac74\uc774 \uc788\uc2b5\ub2c8\ub2e4.");
            else if (k.can_not_backwoods && M)
                alert("\ub3c4\uc11c\uc0b0\uac04 \uc9c0\uc5ed\uc5d0 \ubc1c\uc1a1 \ubd88\uac00\ub2a5\ud55c \ubb3c\uac74\uc774 \uc788\uc2b5\ub2c8\ub2e4.");
            else {
                if (!(k.real_pay_cost < 500 && 0 < k.real_pay_cost)) {
                    "" == $("#order_received_name").val() && $("#order_received_name").val($("#order_recipient").val()); var o = !1; if ($("#recipient").find("input").each(function () { $(this).hasClass("delivery_each_memo") || $(this).hasClass("donot_check_before_payment") || ("" == $(this).val() ? (o = !0, $(this).addClass("error")) : $(this).removeClass("error")); }), o)
                        return $("html,body").scrollTop($("#recipient").offset().top - 200), showFlashMessage({ alert: "\ubc30\uc1a1\uc9c0 \uc815\ubcf4\uc5d0 \ube48\uce78\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4." }), !1; var t = !1; if ($("#payer").find("input").each(function () { $(this).hasClass("delivery_each_memo") || $(this).hasClass("donot_check_before_payment") || ("" == $(this).val() ? (t = !0, $(this).addClass("error")) : $(this).removeClass("error")); }), t)
                        return $("html,body").scrollTop($("#payer").offset().top - 200), showFlashMessage({ alert: "\uc8fc\ubb38\uc790 \uc815\ubcf4\uc5d0 \ube48\uce78\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4." }), !1; var a = !1, i = document.querySelector('input[name="order[payment_method]"]:checked').value; if ("credit_card" == i || "without_bankbook" == i || "phone" == i || "naverpay" == i || "smilepay" == i || "payco" == i || "chai" == i || "tosspay" == i || "kcp_credit_card" == i || "kakaopay" == i || (a = !0), a)
                        return showFlashMessage({ alert: "\uacb0\uc81c \uc815\ubcf4\uc5d0 \uc798\ubabb\ub41c \uac12\uc774 \uc874\uc7ac\ud569\ub2c8\ub2e4." }), !1; if (!m($("#order_payer_email").val().trim()))
                        return $("#order_payer_email").addClass("error"), alert("\uc774\uba54\uc77c \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."), !1; $("#order_payer_email").val($("#order_payer_email").val().trim()), $("#order_payer_email").removeClass("error"); var n = $("#pre_order").data("is-overseas-purchase"); return n && !h($("#customer_number").val()) ? ($("#customer_number").addClass("error"), $("html,body").scrollTop($("#customer_number").offset().top - 100), alert("\uac1c\uc778\ud1b5\uad00\uace0\uc720\ubd80\ud638\ub97c \uc815\ud655\ud788 \uc785\ub825\ud574\uc8fc\uc138\uc694."), !1) : ($("#customer_number").removeClass("error"), n && !$("#check_agree_customer_number").is(":checked") ? (alert("\uac1c\uc778\ud1b5\uad00\uace0\uc720\ubd80\ud638 \uc218\uc9d1/\uc774\uc6a9\uc5d0 \ub3d9\uc758\ud574\uc8fc\uc138\uc694."), !1) : !!$("#check_agree_policy").is(":checked") || (alert("\uacb0\uc81c \uc9c4\ud589 \ud544\uc218\uc0ac\ud56d \ub3d9\uc758\ud574\uc8fc\uc138\uc694."), !1));
                } alert("PG\uc0ac \uc0ac\uc815\uc73c\ub85c \uad6c\ub9e4\uac00\ub2a5 1~499\uc6d0\uc758 \uacb0\uc81c\uac00 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4.\n\ud3ec\uc778\ud2b8\ub97c \uc870\uc808\ud574\uc8fc\uc138\uc694.");
            }
        } function m(e) { return /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e); } function h(e) { var o = e; return /\bp\d{12}\b/i.test(o); } if (function q() { $("form#new_order").keypress(function (e) { "[object HTMLTextAreaElement]" == e.target || 13 == e.keyCode && e.preventDefault(); }); } (), window.bucketLog = window.bucketLog || [], window.bucketLog.push({ category: "initiate-checkout", object_type: "order", object_id: $("#pre_order").data("id") }), window.mobile.isIos || window.mobile.isAndroid) { var v = getParameterByName("os_type"), f = getParameterByName("app"), y = $("#pre_order_json").data("is_app"); "" != v || "" != f || "" != y ? window.mobile.isIos ? $("#order_os_type").val("iOS") : window.mobile.isAndroid && $("#order_os_type").val("Android") : window.mobile.isIos ? $("#order_os_type").val("mWebIOS") : window.mobile.isAndroid && $("#order_os_type").val("mWebAndroid"); }
        else
            $("#order_os_type").val("Web"); if ($("#find_address").length) { var g = document.getElementById("layer"); $("#btnCloseLayer").click(function () { e(); }), $("#find_address").click(function () { new daum.Postcode({ oncomplete: function (e) { var o = e.address + " (" + e.bname + ") " + e.buildingName, t = e.zonecode, a = e.postcode, i = e.sido; $("#order_received_at").val(o), $("#order_received_zip_code").val(t), $("#order_received_at_post_code6").val(a), "" == a ? $("#order_received_at_post_code6").val("000-000") : $("#order_received_at_post_code6").val(a), $("#order_received_at_sido").val(i), $("#order_received_at_detail").focus(), g.style.display = "none", c(); }, width: "100%", height: "100%" }).embed(g), g.style.display = "block", o(); }), $("#order_received_zip_code").click(function () { $("#find_address").click(); }), $("#order_received_at").click(function () { $("#find_address").click(); }); } $("#select_address").length && ($("#order_received_name").click(function () { $("#select_address").click(); }), $("#order_recipient").click(function () { $("#select_address").click(); }), $("#order_received_at").click(function () { $("#select_address").click(); }), $("#order_received_at_detail").click(function () { $("#select_address").click(); }), $("#order_received_phone_number").click(function () { $("#select_address").click(); }), $("#order_received_zip_code").click(function () { $("#select_address").click(); })), $("#open_order_productions").click(function () { var e = $(this); $("#order_productions").animate({ height: "toggle" }, 100, function () { $("#order_productions").is(":visible") ? e.text("\uc8fc\ubb38\uc0c1\ud488 \ub2eb\uae30") : e.text("\uc8fc\ubb38\uc0c1\ud488 \ubcf4\uae30"); }); }), function E() {
                function e() {
                    if (null != t && 0 < a.length) {
                        t.attr("rowspan", a.length + 1); for (var e = 0; e < a.length; e++)
                            a[e].remove();
                    } a = [], o = "", t = null;
                } var o = "", t = null, a = []; $("td.delivery_fee").each(function () { "" == $(this).data("id") || null == $(this).data("id") ? (e(), o = $(this).data("id"), t = $(this)) : o != $(this).data("id") ? (e(), o = $(this).data("id"), t = $(this)) : a.push($(this)); }), e(), $("td.id").each(function () { o != $(this).data("id") ? (e(), o = $(this).data("id"), t = $(this)) : a.push($(this)); }), e();
            } (); var b = $("form#edit_order"), w = $("#order_merchant_uid").val(); $(document).on("focus", ":input", function () { $(this).attr("autocomplete", "off"); }); var k = jQuery.extend({}, _order_module); k.init(); var x = 0, C = []; !function O() { setCookie("ordering_id", "", -1), $("#pre_order").hasClass("bucket") && $("#order_from_cart").val(!0); var e = window.location.href.split("?")[0] + ".json?" + window.location.href.split("?")[1]; $.ajax({ type: "post", url: e, data: JSON.stringify($("#pre_order_json").data("pre_order")), contentType: "application/json; charset=utf-8", traditional: !0, success: function (e) { for (var o = e.productions, t = 0, a = 0, i = 0; i < o.length; i++) { var n = jQuery.extend({}, _order_product_module); n.init(), n.idx = i, n.product_id = o[i].production_id, n.delivery_fee = o[i].delivery_fee, n.delivery_backwoods_fee = o[i].delivery_fee_backwoods, n.product_name = o[i].name, n.brand_name = o[i].brand_name, n.delivery_pay_at = o[i].select_payAt, n.delivery_type = o[i].delivery_type, n.can_delivery_to_jeju = o[i].can_delivery_to_jeju, n.can_delivery_to_backwoods = o[i].can_delivery_to_backwoods, 0 == n.can_delivery_to_backwoods && (k.can_not_backwoods = !0), 0 == n.can_delivery_to_jeju && (k.can_not_jeju = !0), 0 == n.can_delivery_out_of_capital && (k.can_not_out_of_capital = !0), n.request_assembling = o[i].request_assembling && o[i].is_need_assembling, n.selling_cost = o[i].sellingTotal; var r = o[i].sellingTotal; n.request_assembling ? (n.assemble_cost = o[i].assembling_fee * o[i].requestEssentialCount, r += o[i].assembling_fee * o[i].requestEssentialCount) : n.assemble_cost = 0, a += r, 1 == n.delivery_pay_at && (t += n.delivery_fee), t += r, k.addProduction(n); } x = e.available_mileage, k.payment_cost = a, k.real_pay_cost = t, $.each(e.code_coupons, function (e, o) { C.push(o.serial_code); }), $.each(e.link_coupons, function (e, o) { var t = jQuery.extend({}, _coupon_module); t.init(), t.id = o.id, t.use_type = o.use_type, t.valuation = o.valuation, t.max_valuation = o.max_valuation, t.available_products = o.restrict_ids, t.minimum_payment = o.minimum_payment, t.coupon_mold_id = o.coupon_mold_id, t.used_end_at = o.used_end_at, t.user_type = o.user_type, k.existCoupon(o.id) && k.removeCoupon(o.id), k.addCoupon(t); var a = o.id; k.selectCoupon(a), k.coupon_cost > k.getCouponProductCost() && (k.coupon_cost = k.getCouponProductCost()), t.benefit = k.coupon_cost; }), k.resetSelectedCoupon(), s(), d(), c(), $(".delivery_each_memo").each(function (e) { $(this).parent().find(".product_name").text("[" + k.productions[e].brand_name + "]" + k.productions[e].product_name); }); } }); } (); var j = !1, M = !1, P = !1; $("#order_received_at_post_code6").change(function () { c(); }); var I = null; $(document).on("click", "#delivery_message_presets .preset", function () { $("#delivery_message_presets").hide(), I.val($(this).text()); }), $(document).on("click", ".view_delivery_preset", function () { var e = $(this).offset().top + 40; null != I && I.attr("id") === $(this).attr("id") ? $("#delivery_message_presets").toggle() : (I = $(this), $("#delivery_message_presets").css("top", e), $("#delivery_message_presets").show()); }), $(document).on("keydown", ".view_delivery_preset", function () { $("#delivery_message_presets").hide(), I = null; }), $(document).on("keyup", ".view_delivery_preset", function () { $("#delivery_message_presets").hide(), I = null; }), 0 < $("#write_message_per_product").length ? $("#write_message_per_product").change(function () { $("#delivery_message_presets").hide(), $(this).is(":checked") ? ($("#delivery_message").hide(), $("#delivery_messages").show(), $("#multiple_delivery_alert").hide()) : ($("#delivery_message").show(), $("#delivery_messages").hide(), $("#multiple_delivery_alert").show()); }) : ($("#delivery_message").show(), $("#delivery_messages").hide(), $("#multiple_delivery_alert").show()), $("#copy_delivery").click(function () { $("#order_payer_phone_number").val($("#order_received_phone_number").val()), n(), $("#order_payer_name").val($("#order_recipient").val()); }); var T = $("#verified_phone_number").find(".verified_phone_number").data("verified"), W = $("#verified_phone_number").find(".verified_phone_number").data("value"); "" != W && T || (W = -1), n(); var D = !1; T && (D = !0, gtmHelper(2, "\uae30\uc874 \ubc88\ud638 \uc0ac\uc6a9")), $("#order_received_phone_number").keyup(function () { n(); }).keydown(function () { 8 == $(this).val().length || 3 == $(this).val().length || $(this).val(i($(this).val())); }).focusout(function () { $(this).val(i($(this).val())); }), $("#order_payer_phone_number").keyup(function () { n(); }).keydown(function () { 8 == $(this).val().length || 3 == $(this).val().length || ($(this).val(i($(this).val())), n()); }).focusout(function () { $(this).val(i($(this).val())); }), $("#do_verified_phone_number").click(function () { r(); }), $("#resend_verified_number").click(function () { r(); }), $("#check_verified").click(function () { var e = $("#verified_input").val(); $.ajax({ url: "/verification/phone/validate", data: { pin_number: e }, type: "POST", context: document.body, dataType: "json", success: function (e) { e.success ? (t(e.order_count), W = e.phone, T = !0, $("#verified_phone_number").find(".need_verified").hide(), $("#verified_input").val(""), showFlashMessage({ notice: "\uc778\uc99d\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4." }), D || (D = !0, gtmHelper(2, "\uc0c8\ub85c\uc6b4 \ubc88\ud638 \uc778\uc99d"))) : alert("\uc798\ubabb\ub41c \uc778\uc99d\ubc88\ud638\uc785\ub2c8\ub2e4. \uc5f0\uc18d\ud574\uc11c \uc778\uc99d\uc5d0 \uc2e4\ud328\ud560 \uacbd\uc6b0, \uc778\ud130\ub137 \uc0c1\ud0dc\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694."); }, error: function () { alert("\uc9c0\uc18d\uc801\uc73c\ub85c \uc778\uc99d\uc5d0 \uc2e4\ud328\ud558\ub294 \uacbd\uc6b0, \uc624\ub298\uc758\uc9d1 \uace0\uac1d\uc13c\ud130\ub85c \ubb38\uc758 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4."); }, cache: !1, async: !1 }); }), $('input[name="order[payment_method]"]').change(function () { _($(this).next()); var e = $("#pg_policy").find(".opener"); e.text("\uc5f4\uae30"), e.parent().parent().find(".content").hide(); }), $('input[name="order[payment_method]"]:first').prop("checked", !0), _($('input[name="order[payment_method]"]:first').next()), $("#do_payment").click(function () { p(); }); var F = $("#chai_event").data("id"), S = $("#chai_event").data("has_products"); $(".all_policy").find(".opener").click(function () { $(".policies").animate({ height: "toggle" }, 100, function () { $(".policies").is(":visible") ? $(".all_policy").find(".opener").text("\ub2eb\uae30") : $(".all_policy").find(".opener").text("\ubcf4\uae30"); }); }), $(".policy").find(".opener").click(function () { var e = $(this); $(this).parent().parent().hasClass("except") ? "\ub2eb\uae30" == e.text() ? (e.text("\uc5f4\uae30"), $(this).parent().parent().find(".content").hide()) : (e.text("\ub2eb\uae30"), l()) : $(this).parent().parent().find(".content").animate({ height: "toggle" }, 100, function () { e.parent().parent().find(".content").is(":visible") ? e.text("\ub2eb\uae30") : e.text("\uc5f4\uae30"); }); }); var A = !1; $("#code_coupon_opener").click(function () { var e = $("#code_coupon_opener").text(); A ? $("#coupon_codes").slideUp(100, function () { A = !1, $("#code_coupon_opener").text(e.replace("\ub2eb\uae30", "\ud3bc\uccd0\ubcf4\uae30")).removeClass("active"); }) : $("#coupon_codes").slideDown(100, function () { A = !0, $("#code_coupon_opener").text(e.replace("\ud3bc\uccd0\ubcf4\uae30", "\ub2eb\uae30")).addClass("active"); }); }), $("#submit_coupon_code").click(function () { var e = $("#insert_coupon_code").val(); "" == e ? (k.resetSelectedCoupon(), $("#order_coupon_cost").val(0), showFlashMessage({ alert: "\ucfe0\ud3f0\uc801\uc6a9\uc774 \ucde8\uc18c\ub429\ub2c8\ub2e4." }), $(".code_coupon").find(".caption").text("").hide(), a(), $("#form-radio-nothing").prop("checked", !0)) : $.ajax({ url: "/coupon_molds/publish_by_code.json?code=" + encodeURIComponent(e) + "&order_id=" + $("#pre_order").data("id"), success: function (e) { var o = e.coupon, t = jQuery.extend({}, _coupon_module); t.init(), t.id = o.id, t.use_type = o.use_type, t.valuation = o.valuation, t.max_valuation = o.max_valuation, t.available_products = o.restrict_ids, t.minimum_payment = o.minimum_payment, t.coupon_mold_id = o.coupon_mold_id, k.existCoupon(o.id) && k.removeCoupon(o.id), k.addCoupon(t), k.selectCoupon(o.id) ? (k.coupon_cost > k.getCouponProductCost() && (k.coupon_cost = k.getCouponProductCost()), $("#order_coupon_cost").val(k.coupon_cost), a(), $(".code_coupon").find(".caption").text(numberWithCommas(k.coupon_cost) + "\uc6d0\uc774 \ud560\uc778\ub418\uc5c8\uc2b5\ub2c8\ub2e4.").show(), showFlashMessage({ notice: numberWithCommas(k.coupon_cost) + "\uc6d0\uc774 \ud560\uc778\ub418\uc5c8\uc2b5\ub2c8\ub2e4." })) : (k.resetSelectedCoupon(), showFlashMessage({ alert: "\ucfe0\ud3f0 \uc801\uc6a9\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4. \uc9c0\uc18d\uc801\uc73c\ub85c \ubc1c\uc0dd\ud558\uba74 \ubb38\uc758\ud574\uc8fc\uc138\uc694." }), a(), $("#order_coupon_cost").val(0)); }, error: function (e) { var o = $.parseJSON(e.responseText); showFlashMessage({ alert: o.message }), k.resetSelectedCoupon(), $("#order_coupon_cost").val(0), $(".code_coupon").find(".caption").text("").hide(), a(); }, dataType: "json" }); }), $("#insert_coupon_code").keypress(function (e) { 13 == e.keyCode && $("#submit_coupon_code").click(); }), $('input[name="radio_coupon"]').change(function () { var e = $(this).val(); "nothing" == e ? (k.resetSelectedCoupon(), $("#order_coupon_cost").val(0), $(".code_input").hide(), $(".code_coupon").find(".caption").hide(), $("#code_coupon").hide()) : "code_coupon" == e ? (k.resetSelectedCoupon(), $(".code_input").show(), $("#code_coupon").show()) : ($("#code_coupon").hide(), k.selectCoupon(e) ? ($(".code_input").hide(), $(".code_coupon").find(".caption").hide(), k.coupon_cost > k.getCouponProductCost() && (k.coupon_cost = k.getCouponProductCost()), $("#order_coupon_cost").val(k.coupon_cost)) : (k.resetSelectedCoupon(), showFlashMessage({ alert: "\ucfe0\ud3f0 \uc801\uc6a9\uc5d0 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4." }), $("#order_coupon_cost").val(0)), $("#insert_coupon_code").val("")), a(); }), $("#open_coupons").click(function () { var e = $(this); $("#coupon_panel").animate({ height: "toggle" }, 100, function () { $("#coupon_panel").is(":visible") ? e.text("\ucfe0\ud3f0 \ub2eb\uae30") : e.text("\ucfe0\ud3f0 \uc5f4\uae30"); }); }), $("#customer_number").change(function () { h($("#customer_number").val()) ? $(this).removeClass("error") : $(this).addClass("error"); });
    }), $(function () { var e = $("#modal-rating").ratingModal(), o = $("#modal-rating-benefit").modal(); $("#btn-popup-rating").on("click", function () { $(this).hasClass("signed") ? e.toggleModal() : o.toggleModal(); }); var t = $("#modal-bonus").modal(); $("#btn-popup-bonus").on("click", function () { t.toggleModal(); }); }));