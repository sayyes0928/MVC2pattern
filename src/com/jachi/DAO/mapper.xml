<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper

PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"

"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="SqlData">

<select id="select_productpostview" parameterType="String" resultType="com.jachi.DTO.ProductinfoDTO">
  select * from productinfo where pro_code=#{pro_code};
</select>

<select id="select_orderview_count" parameterType="String" resultType="String">
  SELECT ifnull(count(*),'0') FROM delivery where us_id = #{us_id} and dlv_status='입금대기'
  union all (SELECT ifnull(count(*),'0') FROM delivery where us_id = #{us_id} and dlv_status='결제완료')
  union all(SELECT ifnull(count(*),'0') FROM delivery where us_id = #{us_id} and dlv_status='배송준비')
  union all (SELECT ifnull(count(*),'0') FROM delivery where us_id = #{us_id} and dlv_status='배송중')
  union all(SELECT ifnull(count(*),'0') FROM delivery where us_id = #{us_id} and dlv_status='배송완료')
  union all (SELECT ifnull(count(*),'0') FROM delivery where us_id = #{us_id} and dlv_status='구매확정');

</select>

<select id="select_beautyall" parameterType="String" resultType="com.jachi.DTO.BeautyRoomDTO">
	select post_num,post_title,post_posting,post_pic,us_nkname from jachi.posting join jachi.userinfo on userinfo.us_id=posting.post_nickname;
</select>

<select id="select_login_user" resultType="String">
select us_pw from userinfo where us_id =#{us_id};
</select>

<select id="us_id_select" parameterType="String" resultType="String">
select us_pw from userinfo where us_id=#{us_id};
</select>

<select id="us_Nickname_select" parameterType="String" resultType="String">
select us_id from userinfo where us_nkname=#{us_nkname};
</select>

<insert id="insert_join_userinfo" parameterType="com.jachi.DTO.UserinfoDTO">
insert into userinfo values(#{us_mail},#{us_adr},#{us_id},#{us_nkname},#{us_pw},#{us_tel},#{us_birth},#{us_name},#{us_mailagr},#{us_pic},#{us_telagr});
</insert>

<select id="orderList_status" parameterType="com.jachi.DTO.OrderListDTO" resultType="com.jachi.DTO.OrderListDTO" >
SELECT DISTINCT list_date,list_name,dlv_status as 'list_delStatus',cal_price,list_amount,
a.dlv_comp as 'list_company',a.dlv_num as 'list_delNum' 
FROM jachi.delivery a 
join 
(select b.pro_name as 'list_name',a.or_count as 'list_amount',a.or_date as 'list_date',(a.or_count*b.pro_price) as 'cal_price',a.or_id 
FROM jachi.order a join productinfo b on a.or_procode = b.pro_code and a.or_id=#{or_id} ) k where a.dlv_status=#{list_delStatus} group by a.dlv_code;

</select>

<select id="select_listall" parameterType="String" resultType="com.jachi.DTO.ProductinfoDTO">
	select pro_code,pro_name,pro_price,pro_mainimg from productinfo;
</select>

<select id="select_logininfo" parameterType="String" resultType="String">
	select us_pw from userinfo where us_id = #{us_id};
</select>

<<<<<<< HEAD

<select id="select_beautyall" parameterType="String" resultType="com.jachi.DTO.BeautyRoomDTO">
	select post_num,post_title,post_posting,post_pic,us_nkname from posting join userinfo  on userinfo.us_id=posting.post_nickname;
</select>
=======

>>>>>>> refs/remotes/origin/master
<insert id="insert_productinfo" parameterType="com.jachi.DTO.ProductinfoDTO">
<<<<<<< HEAD
insert into productinfo values(#{pro_code},#{pro_name},#{pro_price},#{pro_mainimg},
#{pro_subimg},#{pro_option1},#{pro_option2},#{pro_option3},#{pro_catecode1},#{pro_catecode2},#{pro_catecode3});
 </insert>


<insert id="insert_join_userinfo" parameterType="com.jachi.DTO.UserinfoDTO">
insert into userinfo values(#{us_id},#{us_pw},#{us_name},#{us_nkname},#{us_birth},#{us_tel},#{us_telagr},#{us_mail},#{us_mailagr},#{us_adr},null);
</insert>


<insert id="insert_bt" parameterType="com.jachi.DTO.BeautyRoomDTO">
	insert into posting values(#{post_nkname},#{post_pic},#{post_posting},#{post_pw},default,#{post_tag},#{post_title});
</insert>


</mapper>